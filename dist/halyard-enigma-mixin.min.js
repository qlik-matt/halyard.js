!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["halyard-enigma-mixin"]=t():e["halyard-enigma-mixin"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return{type:e,message:t.message||t.qErrorString,item:n,qixError:t}}var a=n(1),i=r(a),c="Connection Error",u="Loading Error",s="Syntax Error",f={types:"Global",init:function(e){e.config?e.api.Promise=e.config.Promise:e.api.Promise=e.Promise},extend:{createSessionAppUsingHalyard:function(e){var t=this;return t.createSessionApp().then(function(n){return t.setScriptAndReloadWithHalyard(n,e,!1)})},createAppUsingHalyard:function(e,t){var n=this;return n.createApp(e).then(function(e){var r=e.qAppId;return n.openDoc(r).then(function(e){return n.setScriptAndReloadWithHalyard(e,t,!0)})})},reloadAppUsingHalyard:function(e,t,n){var r=this;return r.openDoc(e).catch(function(t){var o=1003;return n&&t.code===o?r.createApp(e).then(function(e){return r.openDoc(e.qAppId)}):r.Promise.reject(t)}).then(function(e){return r.setScriptAndReloadWithHalyard(e,t,!0)})},appendToScriptAndReloadWithHalyard:function(e,t,n){var r=this,a=[];return t.getConnections().forEach(function(t){var n=t.getQixConnectionObject();if(n){var r=e.createConnection(n).then(function(e){return e},function(e){var n=2e3;if(!e.code||e.code!==n)throw o(c,e,t)});a.push(r)}}),e.getScript().then(function(c){var f=t.getScript();return r.Promise.all(a).then(function(){return e.getLocaleInfo().then(function(r){return t.setDefaultSetStatements((0,i.default)(r),!0),e.globalApi.configureReload(!0,!0,!1).then(function(){return e.setScript(c+"\n"+f).then(function(){return e.doReload().then(function(){return e.globalApi.getProgress(0).then(function(r){return 0!==r.qErrorData.length?e.checkScriptSyntax().then(function(e){if(0===e.length)throw o(u,r.qErrorData[0]);var n=t.getItemThatGeneratedScriptAt(e[0].qTextPos);throw o(s,r.qErrorData[0],n)}):n?e.doSave().then(function(){return e}):e})})})})})})})},setScriptAndReloadWithHalyard:function(e,t,n){var r=this,a=[];return t.getConnections().forEach(function(t){var n=t.getQixConnectionObject();if(n){var r=e.createConnection(n).then(function(e){return e},function(e){var n=2e3;if(!e.code||e.code!==n)throw o(c,e,t)});a.push(r)}}),r.Promise.all(a).then(function(){return e.getLocaleInfo().then(function(r){return t.setDefaultSetStatements((0,i.default)(r),!0),e.globalApi.configureReload(!0,!0,!1).then(function(){return e.setScript(t.getScript()).then(function(){return e.doReload().then(function(){return e.globalApi.getProgress(0).then(function(r){return 0!==r.qErrorData.length?e.checkScriptSyntax().then(function(e){if(0===e.length)throw o(u,r.qErrorData[0]);var n=t.getItemThatGeneratedScriptAt(e[0].qTextPos);throw o(s,r.qErrorData[0],n)}):n?e.doSave().then(function(){return e}):e})})})})})})}}},l={types:"Doc",init:function(e){var t={handle:-1,id:"Global",type:"Global"};e.config?t.genericType="Global":(t.customType="Global",t.delta=!0),e.api.globalApi=e.api.session.getObjectApi(t)}};e.exports=[f,l]},function(e,t){"use strict";function n(e){return{ThousandSep:e.qThousandSep,DecimalSep:e.qDecimalSep,MoneyThousandSep:e.qMoneyThousandSep,MoneyDecimalSep:e.qMoneyDecimalSep,MoneyFormat:e.qMoneyFmt,TimeFormat:e.qTimeFmt,DateFormat:e.qDateFmt,TimestampFormat:e.qTimestampFmt,FirstWeekDay:e.qFirstWeekDay,ReferenceDay:e.qReferenceDay,FirstMonthOfYear:e.qFirstMonthOfYear,CollationLocale:e.qCollation,MonthNames:e.qCalendarStrings.qMonthNames,LongMonthNames:e.qCalendarStrings.qLongMonthNames,DayNames:e.qCalendarStrings.qDayNames,LongDayNames:e.qCalendarStrings.qLongDayNames}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}])});
//# sourceMappingURL=halyard-enigma-mixin.min.js.map