!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.halyard=t():e.halyard=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),s=i(f),l=n(12),c=i(l),d=n(3),p=i(d),y=n(15),h=i(y),m=n(6),g=r(m),v=n(16),b=i(v),T="\n\n",x=function(){function e(){var t=this;o(this,e),this.defaultSetStatements={},this.items=[],this.addItem(new h.default(this.defaultSetStatements)),this.lastItems=[(0,b.default)(function(e){return t.getFields(e)})]}return u(e,[{key:"getConnections",value:function(){return this.items.filter(function(e){return e.getConnection}).map(function(e){return e.getConnection()})}},{key:"getQixConnections",value:function(){return this.getConnections().map(function(e){return e.getQixConnectionObject()}).filter(function(e){return e})}},{key:"getFields",value:function(e){e=e||function(){return!0};var t=[];return this.items.forEach(function(n){n.getFields&&n.getFields()&&t.push.apply(t,a(n.getFields().filter(e)))}),t}},{key:"setDefaultSetStatements",value:function(e,t){var n=this;Object.keys(e).forEach(function(r){t&&n.defaultSetStatements[r]||(n.defaultSetStatements[r]=e[r])})}},{key:"getItemScript",value:function(e){var t=e.getScript();return e.getName&&e.getName()&&(t=e.section?"///$tab "+g.escapeText(e.section)+'\n"'+g.escapeText(e.getName())+'":\n'+t:'"'+g.escapeText(e.getName())+'":\n'+t),t}},{key:"getAllScriptBlocks",value:function(){return this.items.concat(this.lastItems).filter(function(e){return e.getScript()})}},{key:"getScript",value:function(){var e=this;return this.getAllScriptBlocks().map(function(t){return e.getItemScript(t)}).join(T)}},{key:"addHyperCube",value:function(e,t){var n=void 0;n=e instanceof c.default?e:new c.default(e,t);for(var r=0;r<n.items.length;r+=1)this.checkIfItemNameExists(n.items[r]);for(var i=0;i<n.items.length;i+=1)this.addItem(n.items[i]);return n}},{key:"addTable",value:function(e,t){var n=void 0;return n=e instanceof s.default?e:new s.default(e,t),this.addItem(n)}},{key:"checkIfItemNameExists",value:function(e){if(e.getName&&e.getName()&&this.items.filter(function(t){return t.getName()===e.getName()}).length>0)throw new Error("Cannot add another table with the same name.")}},{key:"addItem",value:function(e){return this.checkIfItemNameExists(e),this.items.push(e),e}},{key:"getItemThatGeneratedScriptAt",value:function(e){for(var t=this.getAllScriptBlocks(),n=0,r=0;r<t.length;r+=1){var i=this.getItemScript(t[r]),a=n+(""+i+T).length;if(n<=e&&e<=a)return t[r];n=a}}}]),e}();x.Table=s.default,x.HyperCube=c.default,x.Connections=p.default,t.default=x,e.exports=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(2),u=r(o),f=n(11),s=r(f),l=n(6),c=function(){function e(t,n){i(this,e),this.connection=u.default.findMatch(t),n=n||{},"string"==typeof n?(this.name=n,n={}):(this.name=n.name,this.fields=n.fields,this.prefix=n.prefix,n.section&&(this.section=n.section)),this.options=n}return a(e,[{key:"getFields",value:function(){return this.fields}},{key:"getFieldList",value:function(){return this.fields?this.fields.map(function(e){var t='"'+(0,l.escapeText)(e.src||"")+'"';if((0,l.validFieldType)(e.type)){var n=e.type.toUpperCase();e.inputFormat&&(t=n+"#("+t+", '"+e.inputFormat+"')"),t=e.displayFormat?n+"("+t+", '"+e.displayFormat+"')":n+"("+t+")"}if(e.expr&&(t=e.expr),!e.name&&!e.src)throw new Error("A name or src needs to specified on the field: "+JSON.stringify(e));return(0,l.indentation)()+t+' AS "'+(0,l.escapeText)(e.name||e.src)+'"'}).join(",\n"):"*"}},{key:"isProceedingLoad",value:function(){return this.connection instanceof e}},{key:"getPrefix",value:function(){return this.prefix?this.prefix+"\n":""}},{key:"getScript",value:function(){return this.isProceedingLoad()?this.getPrefix()+"LOAD\n"+this.getFieldList()+";\n"+this.connection.getScript():(this.connection.getFileExtension&&(this.options.fileExtension=this.connection.getFileExtension()),this.getPrefix()+"LOAD\n"+this.getFieldList()+"\n"+this.connection.getScript()+(0,s.default)(this.options)+";")}},{key:"getName",value:function(){return this.name||""}},{key:"getSection",value:function(){return this.section}},{key:"getConnection",value:function(){return this.connection}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=i(a),u=n(9),f=r(u),s=n(10),l=i(s),c=new l.default;c.addConnection(function(e){return"string"==typeof e&&e.match(/^https?:\/\/(.*)$/g)},function(e){return new o.default.Web(e)}),c.addConnection(function(e){return"string"==typeof e&&e.match(/^.*\.(.*)$/g)},function(e){return new o.default.File(e)}),c.addConnection(function(e){return e instanceof Array&&f.isJson(e)},function(e){return new o.default.Inline(f.convert(e))}),c.addConnection(function(e){return"string"==typeof e},function(e){return new o.default.Inline(e)}),t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),a=r(i),o=n(7),u=r(o),f=n(8),s=r(f);t.default={File:a.default,Web:u.default,Inline:s.default}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},l=n(5),c=i(l),d=n(6),p=r(d),y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,p.folderPath(e),"folder"));return n.fileName=p.fileName(e),n.fileExtension=p.fileExtension(e)||"txt",n}return u(t,e),f(t,[{key:"getLibStatement",value:function(){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getLibStatement",this).call(this)+"/"+this.fileName}}]),t}(c.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),o=function(){function e(t,n){r(this,e),this.path=t,this.connectionType=n,this.fileExtension=""}return i(e,[{key:"getFileExtension",value:function(){return this.fileExtension}},{key:"getConnectionType",value:function(){return this.connectionType}},{key:"getQixConnectionObject",value:function(){return{qName:this.getName(),qConnectionString:this.path,qType:this.getConnectionType()}}},{key:"getName",value:function(){return this.name||(this.name=(0,a.uniqueName)()),this.name}},{key:"getLibStatement",value:function(){return"lib://"+this.getName()}},{key:"getScript",value:function(){return"FROM ["+this.getLibStatement()+"]"}}]),e}();t.default=o},function(e,t){"use strict";function n(e){var t=e.match(/^(.*)(\\.*\..*$|\\.*)$/);return t?t[1]:(t=e.match(/^(.*)(\/.*\..*$|\/.*)$/),t&&t[1])}function r(e){var t=e.match(/^.*\\(.*\..*|.*)$/);return t?t[1]:(t=e.match(/^.*\/(.*\..*|.*)$/),t&&t[1])}function i(e){var t=e.match(/^.*\.(.*)$/);return t&&t[1]}function a(e){return e.replace(/"/g,'""')}function o(){return"xxxxx-8xxxx-yxxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function u(e){var t=["time","timestamp","date","interval"];return e=e||"",t.indexOf(e.toLowerCase())>-1}function f(){return"  "}function s(e){return e.name||e.src}Object.defineProperty(t,"__esModule",{value:!0}),t.folderPath=n,t.fileName=r,t.fileExtension=i,t.escapeText=a,t.uniqueName=o,t.validFieldType=u,t.indentation=f,t.getFieldName=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),f=r(u),s=function(e){function t(e,n){i(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"internet")),o=e.match(/^https?:\/\/.*\/.*\.(\w*)\?.*$/)||e.match(/^https?:\/\/.*\/.*\.(\w*)$/);return r.fileExtension=n||o&&o[1]||"html",r}return o(t,e),t}(f.default);t.default=s},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(5),l=i(s),c=n(6),d=r(c),p=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data=e,n.fileExtension="txt",n}return u(t,e),f(t,[{key:"getScript",value:function(){return'INLINE "\n'+d.escapeText(this.data)+'\n"'}},{key:"getLibStatement",value:function(){}},{key:"getQixConnectionObject",value:function(){}}]),t}(l.default);t.default=p},function(e,t){"use strict";function n(e,t){return e&&"string"==typeof e&&(e.indexOf(t)>-1||e.indexOf("\n")>-1)?'"'+e.replace(/"/g,'""').replace(/\n/g," ")+'"':e}function r(e){e instanceof Array==!1&&(e=[e]);var t="",r=",",i=Object.keys(e[0]);t=t+i.map(function(e){return n(e,r)}).join(r)+"\n";for(var a=[],o=0;o<e.length;o+=1){a=[];for(var u=0;u<i.length;u+=1)a.push(n(e[o][i[u]],r));t=t+a.join(r)+"\n"}return t=t.slice(0,-"\n".length)}function i(e){return!!(e instanceof Array&&e[0]&&"object"===a(e[0]))}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.convert=r,t.isJson=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e),this.connectionsRegistry=[]}return r(e,[{key:"addConnection",value:function(e,t){this.connectionsRegistry.push({matchingFn:e,connection:t})}},{key:"findMatch",value:function(e){for(var t=0;t<this.connectionsRegistry.length;t+=1)if(this.connectionsRegistry[t].matchingFn(e))return this.connectionsRegistry[t].connection(e);return e}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){var t=["utf8","unicode","ansi","oem","mac"];return t.indexOf(e)>-1&&e||"NaN"!==Number(e).toString()&&"codepage is "+e}function i(e){e||(e={});var t=[];if(e.fileExtension){var n=e.fileExtension;"xlsx"===n&&(n="ooxml"),"csv"===n&&(n="txt"),"htm"===n&&(n="html"),t.push(n)}(e.headerRowNr||0===e.headerRowNr)&&(t.push("header is "+e.headerRowNr+" lines"),t.push("embedded labels")),e.delimiter&&t.push("delimiter is '"+e.delimiter+"'"),e.characterSet&&r(e.characterSet)&&t.push(r(e.characterSet)),e.srcTable&&t.push('table is "'+(0,a.escapeText)(e.srcTable)+'"'),e.noLabels&&t.push("no labels");var i="";return t.length>0&&(i="\n("+t.join(", ")+")"),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(6)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),s=i(f),l=n(6),c=n(13),d=r(c),p=function(){function e(t,n){o(this,e),this.items=[],this.fields=[],this.hyperCubeLayout=this.validateHyperCubeLayout(t),n=n||{},"string"==typeof n?(this.name=n,n={}):(this.name=n.name,n.section&&(this.section=n.section)),this.parseHyperCubeLayout(n),this.options=n}return u(e,[{key:"validateHyperCubeLayout",value:function(e){if(!e)throw new Error("Hyper cube layout is undefined");if(!e.qDimensionInfo)throw new Error("qDimensionInfo is undefined");if(!e.qMeasureInfo)throw new Error("qMeasureInfo is undefined");if("P"===e.qMode)throw new Error("Cannot add hyper cube in pivot mode, qMode:P(DATA_MODE_PIVOT) is not supported");if("K"===e.qMode)throw new Error("Cannot add hyper cube in stacked mode, qMode:K(DATA_MODE_PIVOT_STACK) is not supported");if("S"===e.qMode)return this.validateDataPages(e.qDataPages),this.validateDataPagesCoverage(e.qDataPages,e),e;throw new Error("HyperCubeLayout is not valid")}},{key:"validateDataPages",value:function(e){if(!e)throw new Error("qDataPages are undefined");if(e[0].qArea&&e[0].qArea.qTop>0)throw new Error("qDataPages first page should start at qTop: 0.")}},{key:"validateDataPagesCoverage",value:function(e,t){var n=this,r=0;if(e.forEach(function(e){n.validateQMatrix(e),n.validateQArea(e,t,r),r+=e.qArea.qHeight},this),t.qSize.qcy!==r)throw new Error("qDataPages are missing pages.")}},{key:"validateQMatrix",value:function(e){if(!e.qMatrix)throw new Error("qMatrix of qDataPages are undefined");if(0===e.qMatrix.length)throw new Error("qDataPages are empty")}},{key:"validateQArea",value:function(e,t,n){if(!e.qArea)throw new Error("qArea of qDataPages are undefined");if(e.qArea.qLeft>0)throw new Error("qDataPages have data pages that's not of full qWidth.");if(e.qArea.qWidth<t.qSize.qcx)throw new Error("qDataPages have data pages that's not of full qWidth.");if(e.qArea.qTop<n)throw new Error("qDataPages have overlapping data pages.");if(e.qArea.qTop>n)throw new Error("qDataPages are missing pages.")}},{key:"parseHyperCubeLayout",value:function(){var e=this;e.fields=e.getFieldsFromHyperCubeLayout(),e.data=e.getDataFromHyperCubeLayout();var t=e.fields.map(function(e){return e.name}).join(",")+"\n"+this.data,n=!1;e.fields.forEach(function(t){t.isDual&&(n=!0,e.items.push(e.getMapTableForDualField(t)))});var r={name:e.name,fields:e.getFieldsDefinition(e.fields)};e.section&&!n&&(r.section=e.section),e.items.push(new s.default(t,r))}},{key:"getFieldsDefinition",value:function(e){return e.map(function(e){var t={name:e.name};return(0,l.validFieldType)(e.dimensionType)&&(t.type=e.dimensionType,t.displayFormat=e.displayFormat),e.isDual?t.expr="Dual(ApplyMap('MapDual__"+e.name+"', "+e.name+"), "+e.name+")":t.src=e.name,t})}},{key:"mapDualFieldQMatrix",value:function(e,t){function n(e,t,n){return n.indexOf(e)===t}return e.map(function(e){return d.getDualDataRow(e[t.index])}).filter(n)}},{key:"getMapTableForDualField",value:function(e){var t=this,n=t.hyperCubeLayout.qDataPages.reduce(function(e,t){return[].concat(a(e),a(t.qMatrix))},[]),r=t.mapDualFieldQMatrix(n,e),i=d.getDualHeadersForField(e),o=i+"\n"+r.join("\n"),u="MapDual__"+e.name,f={name:u,prefix:"Mapping"};return this.section&&0===this.items.length&&(f.section=this.section),new s.default(o,f)}},{key:"getDataFromHyperCubeLayout",value:function(){var e=this,t=e.hyperCubeLayout.qDataPages.map(function(t){return t.qMatrix.map(function(t){return t.map(function(t,n){var r=e.fields[n];return!r.isDual&&d.isCellDual(t,r)&&(r.isDual=!0),d.getCellValue(t,r)}).join(",")}).join("\n")}).join("\n");return t}},{key:"getFieldsFromHyperCubeLayout",value:function(){for(var e=this,t=[],n=0;n<e.hyperCubeLayout.qDimensionInfo.length;n+=1)t.push({type:"dimension",dimensionType:d.getDimensionType(e.hyperCubeLayout.qDimensionInfo[n]),name:e.hyperCubeLayout.qDimensionInfo[n].qFallbackTitle,displayFormat:e.hyperCubeLayout.qDimensionInfo[n].qNumFormat.qFmt,index:n});for(var r=0;r<e.hyperCubeLayout.qMeasureInfo.length;r+=1)t.push({type:"measure",name:e.hyperCubeLayout.qMeasureInfo[r].qFallbackTitle,index:e.hyperCubeLayout.qDimensionInfo.length+r});return t}},{key:"getItems",value:function(){return this.items}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.qDimensionType===D.default.qDimensionType.numeric&&0===e.qTags.length}function a(e){return e.qDimensionType===D.default.qDimensionType.text}function o(e){return e.qDimensionType===D.default.qDimensionType.timestamp||e.qDimensionType===D.default.qDimensionType.numeric&&e.qNumFormat.qType===D.default.qTypes.timestamp}function u(e){return e.qDimensionType===D.default.qDimensionType.numeric&&e.qNumFormat.qType===D.default.qTypes.date}function f(e){return e.qDimensionType===D.default.qDimensionType.numeric&&e.qNumFormat.qType===D.default.qTypes.time}function s(e){return e.qDimensionType===D.default.qDimensionType.numeric&&e.qNumFormat.qType===D.default.qTypes.interval}function l(e){return a(e)?"text":i(e)?"mixed":o(e)?"timestamp":f(e)?"time":u(e)?"date":s(e)?"interval":"num"}function c(e){var t=["timestamp","interval","time","date","num"];return e=e||"",t.indexOf(e.toLowerCase())>-1}function d(e){return"measure"===e.type||!("dimension"!==e.type||!c(e.dimensionType))}function p(e){return"dimension"===e.type&&"num"===e.dimensionType}function y(e,t){return p(t)&&e.qText!==Number(e.qNum).toString()}function h(e,t){return e.indexOf(t)>-1||e.indexOf("\n")>-1?"'"+e.replace(/'/g,"''").replace(/\n/g," ")+"'":e}function m(e){return e.qNum}function g(e){return h(e.qText,q)}function v(e,t){return d(t)?m(e):g(e)}function b(e){return""+e.qNum+q+h(e.qText,q)}function T(e){return""+e.name+q+e.name+"_qText}"}Object.defineProperty(t,"__esModule",{value:!0}),t.getDimensionType=l,t.checkIfFieldIsDual=p,t.isCellDual=y,t.getCellValue=v,t.getDualDataRow=b,t.getDualHeadersForField=T;var x=n(14),D=r(x),q=","},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={timestamp:"TS",date:"D",time:"T",interval:"IV"},r={timestamp:"T",text:"D",numeric:"N"};t.default={qTypes:n,qDimensionType:r}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.defaultSetStatements=t}return r(e,[{key:"getScript",value:function(){var e=this;return Object.keys(this.defaultSetStatements).map(function(t){return"SET "+t+"='"+(Array.isArray(e.defaultSetStatements[t])?e.defaultSetStatements[t].join(";"):e.defaultSetStatements[t])+"';"}).join("\n")}},{key:"getName",value:function(){return""}}]),e}();t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return new o.default({name:"autoCalendar",fieldTag:"date",derivedFieldDefinition:u,fieldMatchFunction:function(){return e(function(e){return e.calendarTemplate})}})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(17),o=r(a),u="Dual(Year($1), YearStart($1)) AS [Year] Tagged ('$axis', '$year'),\n  Dual('Q'&Num(Ceil(Num(Month($1))/3)),Num(Ceil(NUM(Month($1))/3),00)) AS [Quarter] Tagged ('$quarter', '$cyclic'),\n  Dual(Year($1)&'-Q'&Num(Ceil(Num(Month($1))/3)),QuarterStart($1)) AS [YearQuarter] Tagged ('$yearquarter', '$qualified'),\n  Dual('Q'&Num(Ceil(Num(Month($1))/3)),QuarterStart($1)) AS [_YearQuarter] Tagged ('$yearquarter', '$hidden', '$simplified'),\n  Month($1) AS [Month] Tagged ('$month', '$cyclic'),\n  Dual(Year($1)&'-'&Month($1), monthstart($1)) AS [YearMonth] Tagged ('$axis', '$yearmonth', '$qualified'),\n  Dual(Month($1), monthstart($1)) AS [_YearMonth] Tagged ('$axis', '$yearmonth', '$simplified', '$hidden'),\n  Dual('W'&Num(Week($1),00), Num(Week($1),00)) AS [Week] Tagged ('$weeknumber', '$cyclic'),\n  Date(Floor($1)) AS [Date] Tagged ('$axis', '$date', '$qualified'),\n  Date(Floor($1), 'D') AS [_Date] Tagged ('$axis', '$date', '$hidden', '$simplified'),\n  If (DayNumberOfYear($1) <= DayNumberOfYear(Today()), 1, 0) AS [InYTD] ,\nYear(Today())-Year($1) AS [YearsAgo] ,\n  If (DayNumberOfQuarter($1) <= DayNumberOfQuarter(Today()),1,0) AS [InQTD] ,\n4*Year(Today())+Ceil(Month(Today())/3)-4*Year($1)-Ceil(Month($1)/3) AS [QuartersAgo] ,\nCeil(Month(Today())/3)-Ceil(Month($1)/3) AS [QuarterRelNo] ,\n  If(Day($1)<=Day(Today()),1,0) AS [InMTD] ,\n12*Year(Today())+Month(Today())-12*Year($1)-Month($1) AS [MonthsAgo] ,\nMonth(Today())-Month($1) AS [MonthRelNo] ,\n  If(WeekDay($1)<=WeekDay(Today()),1,0) AS [InWTD] ,\n(WeekStart(Today())-WeekStart($1))/7 AS [WeeksAgo] ,\nWeek(Today())-Week($1) AS [WeekRelNo];";t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(6),o=function(){function e(t){r(this,e),this.getFieldFn=t.fieldMatchFunction,this.name=t.name,this.fieldTag=t.fieldTag,this.derivedFieldDefinition=t.derivedFieldDefinition}return i(e,[{key:"getScript",value:function(){var e=this.getFieldFn()||[];if(e.length>0)return this.getDefinition(e.map(a.getFieldName))}},{key:"getDefinition",value:function(e){return'"'+(0,a.escapeText)(this.name)+"\":\nDECLARE FIELD DEFINITION Tagged ('$"+this.fieldTag+"')\nFIELDS\n"+this.derivedFieldDefinition+"\nDERIVE FIELDS FROM FIELDS ["+e.join(", ")+'] USING "'+(0,a.escapeText)(this.name)+'";'}}]),e}();t.default=o}])});
//# sourceMappingURL=halyard.min.js.map